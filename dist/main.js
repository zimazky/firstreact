(()=>{"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(this,arguments)}function t({active:t=!1,disabled:a=!1,children:l="Button",...n}){return React.createElement("div",e({className:"Button-module_button__be17e0 "+(t?"Button-module_active__6dea37":"")},n),l)}function a({title:e="Modal title",isOpen:t=!1,onSubmit:a=(()=>{}),onCancel:l=(()=>{}),children:n=null}){return t&&React.createElement("div",{className:"Modal-module_modalOverlay_f9c4b7b",onClick:l},React.createElement("div",{className:"Modal-module_modalWindow_a4aa26e",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"Modal-module_modalHeader_fa40903"},React.createElement("div",{className:"Modal-module_modalTitle__07e9f4"},e)),React.createElement("div",{className:"Modal-module_modalBody_e10262b"},n),React.createElement("div",{className:"Modal-module_modalFooter_f041013"},React.createElement("span",{className:"Modal-module_cancel__3cd4e5",onClick:l},"Cancel"),React.createElement("span",{className:"Modal-module_apply__17fe28",onClick:a},"Apply"))))}const l="ParameterButton-module_name__b2ecc9",n="ParameterButton-module_value_beb9422",i="ParameterButton-module_modal_button_fde7e68";function r({parameterName:e,displayedValue:t=0,controlledValue:r=0,disabled:u=!1,update:c=(e=>{})}){const[s,o]=React.useState(!1),[d,m]=React.useState(r);return console.log("ModalState:",s),console.log("ParameterState:",d),u?React.createElement("div",null,React.createElement("div",{className:l},e),React.createElement("div",{className:n},t)):React.createElement("div",{className:"button",onClick:()=>{o(!s)}},React.createElement("div",{className:l},e),React.createElement("div",{className:n},t),React.createElement(a,{isOpen:s,title:"Set target temperature for Zone",onSubmit:()=>{c(d),o(!1)},onCancel:()=>{o(!1)}},React.createElement("span",{className:i,onClick:()=>{m(d-.1)}},"-"),React.createElement("span",{className:"ParameterButton-module_modal_parameter__7b683e"},d.toFixed(1)),React.createElement("span",{className:i,onClick:()=>{m(d+.1)}},"+")))}const u={controlbox:"TemperatureControl-module_controlbox_dee125d",header:"TemperatureControl-module_header_b192608"};function c({zone:e,update:a}){return console.log(e),React.createElement("div",{className:u.controlbox},React.createElement("div",{className:u.header},React.createElement("div",{className:u.indicator}),"ZONE"+e.id),React.createElement("div",null,React.createElement(t,{onClick:()=>{console.log("pwrcontrol_button")}},"PWRCTRL"),React.createElement(t,{disabled:!0},"PWR"),React.createElement(t,null,"CONFIG")),React.createElement("div",null,React.createElement(t,{onClick:()=>{console.log("showpwr_button")}},"SHOWPWR")),React.createElement("div",null,React.createElement(r,{parameterName:"temperature",displayedValue:e.temperature.toFixed(1)+"°("+e.targetTemperature.toFixed(1)+"±"+e.targetTemperatureDelta+")",controlledValue:e.targetTemperature,update:t=>{a({...e,targetTemperature:t})}}),React.createElement(r,{parameterName:"humidity",displayedValue:e.humidity.toFixed(1)+"%",disabled:!0})),React.createElement("div",{className:"sensorstatus"}))}const s=[{value:1,unit:"s",shift:10800},{value:2,unit:"s",shift:10800},{value:5,unit:"s",shift:10800},{value:10,unit:"s",shift:10800},{value:20,unit:"s",shift:10800},{value:30,unit:"s",shift:10800},{value:60,unit:"m",shift:10800},{value:120,unit:"m",shift:10800},{value:300,unit:"m",shift:10800},{value:600,unit:"m",shift:10800},{value:1200,unit:"m",shift:10800},{value:1800,unit:"m",shift:10800},{value:3600,unit:"h",shift:10800},{value:7200,unit:"h",shift:10800},{value:10800,unit:"h",shift:10800},{value:21600,unit:"h",shift:10800},{value:43200,unit:"h",shift:10800},{value:86400,unit:"d",shift:10800},{value:172800,unit:"d",shift:10800},{value:345600,unit:"d",shift:10800},{value:604800,unit:"w",shift:27e4},{value:1209600,unit:"w",shift:27e4},{value:2678400,qt:86400,unit:"M",shift:null}],o=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function d({title:e="TimeDiagram",width:t=300,height:a=200,begin:l,end:n,children:i=null}){const[r,u]=React.useState({begin:l,end:n}),[c,d]=React.useState(0),m=React.useRef(null);let h=!1,f=0;function v(e){e.preventDefault(),h=!0,f=e.offsetX}function g(e){if(h){let a=e.offsetX-f;f=e.offsetX,u((e=>{let l=(e.end-e.begin)/t;return{begin:e.begin-l*a,end:e.end-l*a}}))}d(e.offsetX)}function p(e){e.preventDefault(),h=!1}function R(e){e.preventDefault();let a=e.wheelDelta>0?.9:1.1111111111111112,l=e.offsetX/t;u((e=>{if(a*(e.end-e.begin)<300)return e;let t=e.begin+l*(e.end-e.begin);return{begin:t-a*(t-e.begin),end:t+a*(e.end-t)}}))}function E(e){d(0)}return React.useEffect((()=>(console.log("AddEventListener Mouse"),m.current.addEventListener("wheel",R),m.current.addEventListener("mousedown",v),m.current.addEventListener("mousemove",g),m.current.addEventListener("mouseup",p),m.current.addEventListener("mouseout",E),()=>{console.log("RemoveEventListener Mouse"),m.current.removeEventListener("wheel",R),m.current.removeEventListener("mousedown",v),m.current.removeEventListener("mousemove",g),m.current.removeEventListener("mouseup",p),m.current.removeEventListener("mouseout",E)})),[]),React.createElement(React.Fragment,null,React.createElement("div",null,e),React.createElement("div",{className:"Diagram-module_gridBox__7bb01a"},React.createElement("div",{className:"Diagram-module_context__21983f"}," ",function(e,t,a,l=50){let n=l*(t-e)/a,[i]=[0,...s.filter((e=>n>=e.value)).keys()].slice(-1),r=a/(t-e);const u=[];let c=new Date(1e3*(e+10800)),o=e;if("M"==s[i].unit)do{let e=c.getUTCFullYear();c.setUTCHours(0),c.setMinutes(0),c.setSeconds(0),c.setUTCFullYear(e+1,0,1);let a=c.getTime()/1e3-10800,l=a<t?(a-o)*r:(t-o)*r;u.push({tick:o,label:e,width:l}),o=a}while(o<t);else if("d"==s[i].unit||"w"==s[i].unit)do{let e=c.getUTCMonth()+1,a=c.getUTCFullYear();c.setUTCHours(0),c.setMinutes(0),c.setSeconds(0),c.setUTCDate(1),c.setUTCMonth(e);let l=c.getTime()/1e3-10800,n=l<t?(l-o)*r:(t-o)*r;u.push({tick:o,label:a+"."+(e<10?"0":"")+e,width:n}),o=l}while(o<t);else if("h"==s[i].unit){let a=86400*~~((e+s[i].shift)/86400+1)-s[i].shift;do{let e=a<t?(a-o)*r:(t-o)*r,l=new Date(1e3*(o+10800)),n=l.getUTCDate(),i=l.getUTCMonth()+1,c=l.getUTCFullYear();u.push({tick:o,label:c+"."+(i<10?"0":"")+i+"."+(n<10?"0":"")+n,width:e}),o=a,a+=86400}while(o<t)}else if("m"==s[i].unit){let a=3600*~~((e+s[i].shift)/3600+1)-s[i].shift;do{let e=a<t?(a-o)*r:(t-o)*r,l=new Date(1e3*(o+10800)),n=l.getUTCHours(),i=l.getUTCDate(),c=l.getUTCMonth()+1;u.push({tick:o,label:(c<10?"0":"")+c+"."+(i<10?"0":"")+i+" "+(n<10?"0":"")+n+"h",width:e}),o=a,a+=3600}while(o<t)}else if("s"==s[i].unit){let a=60*~~((e+s[i].shift)/60+1)-s[i].shift;do{let e=a<t?(a-o)*r:(t-o)*r,l=new Date(1e3*(o+10800)),n=l.getUTCMinutes(),i=l.getUTCHours();u.push({tick:o,label:(i<10?"0":"")+i+":"+(n<10?"0":"")+n,width:e}),o=a,a+=60}while(o<t)}return u}(r.begin,r.end,300,50).map((e=>React.createElement("div",{className:"Diagram-module_contextTickLabels_e32f42e",key:e.tick,style:{width:e.width}},e.label)))),React.createElement("div",{className:"Diagram-module_detail__874e20",style:{height:a+12}}," ",function(e,t,a,l=50){let n=l*(t-e)/a,[i]=[0,...s.filter((e=>n>=e.value)).keys()].slice(-1),r=a/(t-e),u=e,c=new Date(1e3*(e+10800));const d=[];if("M"==s[i].unit)do{let e=c.getUTCMonth()+1;c.getUTCFullYear(),c.setUTCHours(0),c.setMinutes(0),c.setSeconds(0),c.setUTCDate(1),c.setUTCMonth(e);let a=c.getTime()/1e3-10800,l=a<t?(a-u)*r:(t-u)*r;d.push({tick:u,label:o[e-1],width:l}),u=a}while(u<t);else{let a=s[i].value,l=~~((e+s[i].shift)/a+1)*a-s[i].shift;do{let e=l<t?(l-u)*r:(t-u)*r;if(c=new Date(1e3*(u+10800)),"s"==s[i].unit){let t=c.getUTCSeconds();d.push({tick:u,label:(t<10?"0":"")+t+"''",width:e})}else if("m"==s[i].unit){let t=c.getUTCMinutes();d.push({tick:u,label:(t<10?"0":"")+t+"'",width:e})}else if("h"==s[i].unit){let t=c.getUTCHours();d.push({tick:u,label:(t<10?"0":"")+t+"h",width:e})}else if("d"==s[i].unit){let t=c.getUTCDate();d.push({tick:u,label:(t<10?"0":"")+t,width:e})}else if("w"==s[i].unit){let t=c.getUTCDate();d.push({tick:u,label:(t<10?"0":"")+t,width:e})}u=l,l+=a}while(u<t)}return d}(r.begin,r.end,300,50).map((e=>React.createElement("div",{className:"Diagram-module_detailTickLabels__a93b19",key:e.tick,style:{width:e.width,height:a+12}},e.label)))),React.createElement("svg",{ref:m,width:t,height:a,viewBox:"0 0 "+t+" "+a,className:"Diagram-module_svgBox_d334579"},i)),React.createElement("div",null))}function m({data:e}){let t=e.map(((e,t)=>5*t+" "+e)).join(" ");return React.createElement("polyline",{points:t,fill:"none",stroke:"white",strokeWidth:"1"})}function h(){const[e,t]=React.useState([{id:"1",temperature:21.5,targetTemperature:25,targetTemperatureDelta:.2,humidity:56},{id:"2",temperature:22.4,targetTemperature:23.4,targetTemperatureDelta:.1,humidity:55.6},{id:"3",temperature:13.5,targetTemperature:0,targetTemperatureDelta:0,humidity:98.2}]);let a={};return a.end=Date.now()/1e3,a.begin=a.end-172800,React.createElement(React.Fragment,null,React.createElement(d,{begin:a.begin,end:a.end},React.createElement(m,{data:[15,18,14,13,15,20,21,25,29,24,25,22,10,12,9,8,6,3,5,4,8,7]})),React.createElement(d,{begin:a.begin,end:a.end}),React.createElement("div",null,e.map(((a,l)=>React.createElement(c,{key:l,zone:a,update:a=>{t(e.map((e=>(console.log(a),e.id==a.id?a:e))))}})))))}ReactDOM.render(React.createElement(h,null),document.getElementById("root"))})();