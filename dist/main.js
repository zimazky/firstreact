(()=>{"use strict";var e={95:function(e,t,a){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HydroEventParser=t.HydroDataSet=void 0;const s=i(a(818));class r{constructor(e){this.pressure=new s.default(e),this.mode=new s.default(e)}push(e,t){null!=e.pressure&&this.pressure.push({flag:e.flag,value:e.pressure,time:t}),null!=e.mode&&this.mode.push({flag:1,value:e.mode,time:t})}}t.HydroDataSet=r,t.HydroEventParser=class{constructor(){this.pdata=0,this.pressure=0,this.mode=0,this.hiLimit=0,this.loLimit=0,this.dryLimit=0,this.pumpInitTime=0,this.pumpRunLimit=0,this.retryInterval=0}parseEventOld(e){const t={},a=+e[0];let i=2;128&a&&(this.pdata=0),1&a&&(this.pdata+=+e[i++]),4&a&&(t.mode=this.mode=+e[i++]),8&a&&(t.hiLimit=this.hiLimit=+e[i++],t.loLimit=this.loLimit=+e[i++],t.dryLimit=this.dryLimit=+e[i++]),16&a&&(t.pumpInitTime=this.pumpInitTime=+e[i++],t.pumpRunLimit=this.pumpRunLimit=+e[i++],t.retryInterval=this.retryInterval=+e[i++]);let s=2&a?5*(this.pdata-102.3)/818.4:this.pdata/1e3;return s>=-1&&s<=6&&(t.flag=128&a?0:1,t.pressure=this.pressure=s),t}parseEvent(e,t){const a={},i=+e[1];let s=2;128&i&&(this.pdata=0),1&i&&(this.pdata+=+e[s++]),4&i&&(a.mode=this.mode=+e[s++]),8&i&&(a.hiLimit=this.hiLimit=+e[s++],a.loLimit=this.loLimit=+e[s++],a.dryLimit=this.dryLimit=+e[s++]),16&i&&(a.pumpInitTime=this.pumpInitTime=+e[s++],a.pumpRunLimit=this.pumpRunLimit=+e[s++],a.retryInterval=this.retryInterval=+e[s++]);let r=2&i?5*(this.pdata-102.3)/818.4:this.pdata/1e3;return r>=-1&&r<=5&&(a.flag=1,a.pressure=this.pressure=r),[e.slice(s),a]}getLastData(){return{flag:1,pressure:this.pressure,mode:this.mode,hiLimit:this.hiLimit,loLimit:this.loLimit,dryLimit:this.dryLimit,pumpInitTime:this.pumpInitTime,pumpRunLimit:this.pumpRunLimit,retryInterval:this.retryInterval}}createLogDataSet(e){return new r(e)}}},6:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HydroSensorData=void 0;const i=a(95),s=a(805);t.HydroSensorData=class{constructor(e,t,a,i,s){this.id=e,this.ext="H"+e,this.controller=t.logLoader,this.timezone=t.timezone,this.color=a,this.timeslots=[],this.begin=i,this.end=s}createEventParser(){return new i.HydroEventParser}getDataSet(e){return void 0===this.timeslots[e]&&(this.timeslots[e]=new i.HydroDataSet(e)),this.timeslots[e]}createDataSet(e){return void 0!==this.timeslots[e]?null:(this.timeslots[e]=new i.HydroDataSet(e),this.timeslots[e])}getParser(e){return{name:this.ext,parser:this.createEventParser(),dataset:this.getDataSet(e)}}load(e){e<this.begin||e>this.end||void 0!==this.timeslots[e]||this.controller.getLogByTimestamp(this.ext,e,(t=>{this.parseHydroLogData(t,e)}),(()=>{void 0===this.timeslots[e]&&(this.timeslots[e]=null)}))}getRegData(e,t,a){let i={zdata:[],min:Number.MAX_VALUE,max:Number.MIN_VALUE};for(let a=e.begin;a<e.end;a+=t)i.zdata.push({flag:0});for(let r=86400*~~((e.begin+3600*(s=this.timezone))/86400)-3600*s;r<e.end;r+=86400)void 0===this.timeslots[r]?a(r):null!==this.timeslots[r]&&(i=this.timeslots[r].pressure.fillzdata(e,t,i));var s;return i}parseHydroLogData(e,t){const a=e.split("\n"),r=new s.TickerEventParser,n=new i.HydroEventParser,l=this.createDataSet(t);null!==l&&e&&a.forEach((e=>{const t=e.split(";");if(t.length<=2)return;const a=r.parseEventOld(t);if(0==a)return;const i=n.parseEventOld(t);l.push(i,a)}))}}},408:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LLogController=void 0;const i=a(805);t.LLogController=class{constructor(e,t,a){this.id=0,this.ext="L",this.load=e=>{e>=this.begin&&e<=this.end?this.logLoader.getLogByTimestamp(this.ext,e,(t=>{this.parseLogData(t,e)})):(this.thermoSensors.forEach((t=>t.load(e))),this.hydroSensors.forEach((t=>t.load(e))))},this.logLoader=e.logLoader,this.timezone=e.timezone,this.timeslots=[],this.begin=t,this.end=a,this.thermoSensors=e.thermoSensors,this.hydroSensors=e.hydroSensors}createEventParser(){return new i.TickerEventParser}getDataSet(e){return void 0===this.timeslots[e]&&(this.timeslots[e]=new i.TickerDataSet(e)),this.timeslots[e]}createDataSet(e){return void 0!==this.timeslots[e]?null:(this.timeslots[e]=new i.TickerDataSet(e),this.timeslots[e])}getParser(e){return{name:this.ext,parser:this.createEventParser(),dataset:this.getDataSet(e)}}parseLogData(e,t){const a=this.thermoSensors.map((e=>e.getParser(t))),s=this.hydroSensors.map((e=>e.getParser(t))),r={name:"T",parser:new i.TickerEventParser};if(!e)return;const n=e.split("\n");let l=!1;n.forEach((e=>{if(e.startsWith("F"))return void(l=!0);let t=e.split(";");const i=t.findIndex((e=>"T"==e));if(i<0)return;const[n,o]=r.parser.parseEvent(t.slice(i),l);for(t=t.slice(0,i);t.length>0;){const e=t[0],i=a.find((t=>t.name==e));if(void 0!==i){const[e,a]=i.parser.parseEvent(t,l);i.dataset.push(a,o.time),t=e;continue}const r=s.find((t=>t.name==e));if(void 0===r)t=t.slice(1);else{const[e,a]=r.parser.parseEvent(t,l);r.dataset.push(a,o.time),t=e}}l=!1}));const o=r.parser.getLastTime();a.forEach((e=>e.dataset.push(e.parser.getLastData(),o))),s.forEach((e=>e.dataset.push(e.parser.getLastData(),o)))}}},805:function(e,t,a){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TickerEventParser=t.TickerDataSet=void 0;const s=i(a(818));class r{constructor(e){this.loopcounter=new s.default(e)}push(e,t){null!=e.loopcounter&&this.loopcounter.push({flag:1,value:e.loopcounter,time:t})}}t.TickerDataSet=r,t.TickerEventParser=class{constructor(){this.time=0,this.loopcounter=0}parseEventOld(e){128&+e[0]&&(this.time=0);let t=+e[1];return t=t>2147483647?t-4294967296:t,t<0&&console.log(t,this.time),this.time+=t,this.time}parseEvent(e,t){t&&(this.time=0,this.loopcounter=0);let a=+e[1];return a=a>2147483647?a-4294967296:a,a<0&&console.log(a,this.time),this.time+=a,this.loopcounter+=+e[2],[e.slice(3),{time:this.time,loopcounter:this.loopcounter}]}getLastData(){return{time:this.time,loopcounter:this.loopcounter}}getLastTime(){return this.time}createLogDataSet(e){return new r(e)}}},913:function(e,t,a){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThermoEventParser=t.ThermoDataSet=void 0;const s=i(a(818));class r{constructor(e){this.temperature=new s.default(e),this.humidity=new s.default(e),this.power=new s.default(e)}push(e,t){null!=e.temperature&&this.temperature.push({...e.temperature,time:t}),null!=e.humidity&&this.humidity.push({...e.humidity,time:t}),null!=e.power&&this.power.push({flag:1,value:e.power,time:t})}}t.ThermoDataSet=r,t.ThermoEventParser=class{constructor(){this.temperature=0,this.humidity=0,this.targetTemperature=0,this.targetTemperatureDelta=0,this.power=0,this.mode=0,this.sensorState=0,this.f=0}parseEventOld(e){let t={};const a=+e[0];let i=2;if(128&a&&(this.temperature=0,this.humidity=0,this.power=0,this.mode=0,this.targetTemperature=0,this.targetTemperatureDelta=0,this.sensorState=0),1&a&&(this.temperature+=+e[i++]),2&a&&(this.humidity+=+e[i++]),4&a?this.power||(t.power=this.power=1):this.power&&(t.power=this.power=0),8&a?this.mode||(t.mode=this.mode=1):this.mode&&(t.mode=this.mode=0),16&a&&(t.targetTemperature=this.targetTemperature=+e[i++]),32&a&&(t.targetTemperatureDelta=this.targetTemperatureDelta=+e[i++]),64&a&&(t.sensorState=this.sensorState=+e[i++]),0==this.sensorState){const e=128&a?0:1;1&a&&(t.temperature={flag:e,value:this.temperature/10}),2&a&&(t.humidity={flag:e,value:this.humidity/10})}return t}parseEvent(e,t){let a={};const i=+e[1];let s=2;if(128&i&&(this.temperature=0,this.humidity=0,this.power=0,this.mode=0,this.targetTemperature=0,this.targetTemperatureDelta=0,this.sensorState=0),1&i&&(this.temperature+=+e[s++]),2&i&&(this.humidity+=+e[s++]),4&i?this.power||(a.power=this.power=1):this.power&&(a.power=this.power=0),8&i?this.mode||(a.mode=this.mode=1):this.mode&&(a.mode=this.mode=0),16&i&&(a.targetTemperature=this.targetTemperature=+e[s++]),32&i&&(a.targetTemperatureDelta=this.targetTemperatureDelta=+e[s++]),64&i&&(a.sensorState=this.sensorState=+e[s++]),0==this.sensorState){const e=128&i?0:1;1&i&&(a.temperature={flag:e,value:this.temperature/10}),2&i&&(a.humidity={flag:e,value:this.humidity/10})}return[e.slice(s),a]}getLastData(){let e={};const t=0==this.sensorState?1:0;return e.temperature={flag:t,value:this.temperature/10},e.humidity={flag:t,value:this.humidity/10},e.power=this.power,e.mode=this.mode,e.targetTemperature=this.targetTemperature,e.targetTemperatureDelta=this.targetTemperatureDelta,e.sensorState=this.sensorState,e}createLogDataSet(e){return new r(e)}}},364:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThermalSensorData=void 0;const i=a(805),s=a(913);class r{constructor(e,t,[a,i,s],r,n){this.id=e,this.ext="Z"+e,this.controller=t.logLoader,this.timezone=t.timezone,this.colors={t:a,h:i,p:s},this.isShowPower=!1,this.timeslots=[],this.begin=r,this.end=n}createEventParser(){return new s.ThermoEventParser}getDataSet(e){return void 0===this.timeslots[e]&&(this.timeslots[e]=new s.ThermoDataSet(e)),this.timeslots[e]}createDataSet(e){return void 0!==this.timeslots[e]?null:(this.timeslots[e]=new s.ThermoDataSet(e),this.timeslots[e])}getParser(e){return{name:this.ext,parser:this.createEventParser(),dataset:this.getDataSet(e)}}load(e){e<this.begin||e>this.end||void 0!==this.timeslots[e]||this.controller.getLogByTimestamp(this.ext,e,(t=>{this.parseThermoLogData(t,e)}),(()=>{void 0===this.timeslots[e]&&(this.timeslots[e]=null)}))}getRegData(e,t,a){let i=r.DATASET_NAMES.map((()=>({zdata:[],min:Number.MAX_VALUE,max:Number.MIN_VALUE})));for(let a=e.begin;a<e.end;a+=t)i.forEach((e=>e.zdata.push({flag:0})));for(let r=86400*~~((e.begin+3600*(s=this.timezone))/86400)-3600*s;r<e.end;r+=86400)void 0===this.timeslots[r]?a(r):null!==this.timeslots[r]&&(i[0]=this.timeslots[r].temperature.fillzdata(e,t,i[0]),i[1]=this.timeslots[r].humidity.fillzdata(e,t,i[1]),i[2]=this.timeslots[r].power.fillzdata(e,t,i[2]));var s;return i}parseThermoLogData(e,t){const a=e.split("\n"),r=new i.TickerEventParser,n=new s.ThermoEventParser,l=this.createDataSet(t);if(null===l)return;if(!e)return;a.forEach((e=>{const t=e.split(";");if(t.length<=2)return;const a=r.parseEventOld(t);if(0==a)return;const i=n.parseEventOld(t);l.push(i,a)}));const o=n.getLastData(),h=r.getLastTime();l.push(o,h)}}t.ThermalSensorData=r,r.DATASET_NAMES=["Temperature","Humidity","Power"]},941:function(e,t,a){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(a(473)),r=a(6),n=a(364),l=a(408);t.default=class{constructor(e,t=(()=>{}),a=8,i=3){this.logLoader=new s.default(e,a,i),this.thermoSensors=[],this.hydroSensors=[],this.logLoader.onload=t,this.timezone=i,this.logController=new l.LLogController(this,+new Date("2022.11.06")/1e3,Date.now()/1e3)}setOnLoad(e){this.logLoader.onload=e}addThermalSensor(e,[t,a,i],s,r){this.thermoSensors.push(new n.ThermalSensorData(e,this,[t,a,i],s,r))}addHydroSensor(e,t,a,i){this.hydroSensors.push(new r.HydroSensorData(e,this,t,a,i))}getThermalSensorsRegData(e,t){return this.thermoSensors.map((a=>a.getRegData(e,t,this.logController.load)))}getHydroSensorsRegData(e,t){return this.hydroSensors.map((a=>a.getRegData(e,t,this.logController.load)))}}},473:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.OK=0]="OK",e[e.Busy=1]="Busy",e[e.Queued=2]="Queued",e[e.NotYet=3]="NotYet"}(a||(a={})),t.default=class{constructor(e,t=8,a=3){this.queue=[],this.inProcess=[],this.onload=()=>{},this.loadNext=()=>{const e=this.queue.shift();void 0!==e&&(this.inProcess.push(e.name),fetch(this.url+e.name).then((e=>{if(e.ok)return e.text();throw Error(`status=${e.status}`)})).then((t=>e.resolve(t))).catch((t=>{console.log(`loading error ${e.name}: ${t.message}`),e.reject()})).finally((()=>{this.inProcess=this.inProcess.filter((t=>t!=e.name)),this.onload(),this.loadNext()})))},this.threadsLimit=t,this.queue=[],this.url=e,this.timezone=a}getLogByName(e,t,i){if(this.queue.some((t=>t.name==e))||this.inProcess.includes(e))return a.Queued;for(this.queue.push({name:e,resolve:t,reject:i});this.queue.length>0&&this.inProcess.length<this.threadsLimit;)this.loadNext();return a.OK}getLogByTimestamp(e,t,i,s=(()=>{})){if(t>function(e,t){return 86400*~~((e+3600*t)/86400)-3600*t}(Date.now()/1e3,this.timezone))return a.NotYet;const r=function(e,t){const a=new Date(1e3*(e+3600*t));var i=a.getUTCDate(),s=a.getUTCMonth()+1;return a.getUTCFullYear()+(s<10?"0":"")+s+(i<10?"0":"")+i}(t,this.timezone)+"."+e;return this.getLogByName(r,i,s)}}},818:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t="stepped"){this.data=[],this.flag=0,this.value=0,this.high=-Number.MAX_VALUE,this.low=Number.MAX_VALUE,this.open=0,this.close=0,this.topen=0,this.tclose=0,this.nclose=0,this.tstep=0,this.zdata=[],this.ohlcdata=[],this.hldata=[],this.time=e,this.zmode=t}push(e){if(!(e.time<this.time)){if(0==this.data.length)return this.flag=1,this.value=this.low=this.high=this.open=this.close=e.value,this.topen=this.tclose=e.time,void this.data.push({flag:0,time:e.time,value:e.value});this.tclose>this.topen&&(this.value=(this.value*(this.tclose-this.topen)+(this.close-this.open)*(e.time-this.tclose))/(e.time-this.topen)),this.close!=e.value||1!=e.flag?(this.low=Math.min(this.low,e.value),this.high=Math.max(this.high,e.value),this.close=e.value,this.tclose=e.time,this.nclose=0,this.data.push({flag:e.flag,time:e.time,value:e.value})):0==this.nclose?(this.nclose++,this.tclose=e.time,this.data.push({flag:e.flag,time:e.time,value:e.value})):(this.data[this.data.length-1].time=e.time,this.tclose=e.time)}}getlinearregdata(e){const t=[];let a=this.data[0],i=this.time,s=a.value;for(;i+e<a.time;)t.push({flag:0,value:s}),i+=e;t.push({flag:1,value:s});for(let r=1;r<this.data.length;r++){a=this.data[r];const n=t.length-1,l=this.data[r-1];if(a.time<i+e)t[n].value+=(a.value-s)*(i+e-a.time)/e,s=a.value;else{i+=e;const r=(a.value-l.value)/(a.time-l.time);for(s=l.value+r*(i-l.time);i+e<a.time;){const n=s+r*e;t.push({flag:a.flag,value:(s+n)/2}),s=n,i+=e}t.push({flag:1,value:s})}}return t}getsteppedregdata(e){const t=[];let a=this.data[0],i=this.time,s=a.value;for(;i+e<a.time;)t.push({flag:0,value:s}),i+=e;t.push({flag:1,value:s});for(let r=1;r<this.data.length;r++){a=this.data[r];const n=t.length-1,l=this.data[r-1];if(a.time<i+e)t[n].value+=(a.value-s)*(i+e-a.time)/e,s=a.value;else{for(i+=e,s=l.value;i+e<a.time;)t.push({flag:a.flag,value:s}),i+=e;0==a.flag&&(s=a.value),t.push({flag:1,value:s})}}return t.push({flag:1,value:s}),t}getohlcregdata(e){const t=[];let a=this.data[0],i=this.time,s=a.value;for(;i+e<a.time;)t.push({flag:0,open:s,high:s,low:s,close:s}),i+=e;t.push({flag:1,open:s,high:s,low:s,close:s});for(let r=1;r<this.data.length;r++){a=this.data[r];const n=t.length-1,l=this.data[r-1];if(a.time<i+e)t[n].close=a.value,t[n].high=a.value>t[n].high?a.value:t[n].high,t[n].low=a.value<t[n].low?a.value:t[n].low;else{for(i+=e,s=l.value;i+e<a.time;)t.push({flag:a.flag,open:s,high:s,low:s,close:s}),i+=e;0==a.flag&&(s=a.value),t.push({flag:1,open:s,high:s,low:s,close:s})}}return t.push({flag:1,open:s,high:s,low:s,close:s}),t}gethighlowregdata(e){const t=[];let a=this.data[0],i=this.time,s=a.value;for(;i+e<a.time;)t.push({flag:0,high:s,low:s}),i+=e;t.push({flag:1,high:s,low:s});for(var r=1;r<this.data.length;r++){a=this.data[r];const n=t.length-1,l=this.data[r-1];if(a.time<i+e)t[n].high=a.value>t[n].high?a.value:t[n].high,t[n].low=a.value<t[n].low?a.value:t[n].low;else{for(i+=e,s=l.value;i+e<a.time;)t.push({flag:a.flag,high:s,low:s}),i+=e;0==a.flag&&(s=a.value),t.push({flag:1,high:s,low:s})}}return t.push({flag:1,high:s,low:s}),t}rezoom(e){if(e<1&&(e=1),this.tstep!=e&&0!=this.data.length)switch(this.tstep=e,this.zmode){case"linear":this.zdata=this.getlinearregdata(e);break;case"stepped":this.zdata=this.getsteppedregdata(e);break;case"highlow":this.hldata=this.gethighlowregdata(e);break;case"ohlc":this.ohlcdata=this.getohlcregdata(e)}}fillzdata(e,t,a){if(this.tclose<=e.begin||this.topen>=e.end)return a;this.rezoom(t);let i=e.begin,s=~~((e.begin-this.time)/t),r=0;s<0&&(i=this.time,r=-s,s=0);let n=a.min,l=a.max;for(;i<e.end&&i<this.tclose;s++,r++,i+=t){const e=this.zdata[s].flag;a.zdata[r].flag=e;const t=this.zdata[s].value;a.zdata[r].value=t,1==e&&(n=t<n?t:n,l=t>l?t:l)}return{zdata:a.zdata,min:n,max:l}}fillHLData(e,t,a){if(this.tclose<=e.begin||this.topen>=e.end)return a;this.rezoom(t);let i=e.begin,s=~~((e.begin-this.time)/t),r=0;s<0&&(i=this.time,r=-s,s=0);let n=a.min,l=a.max;for(;i<e.end&&i<this.tclose;s++,r++,i+=t){const e=this.hldata[s].flag;a.zdata[r].flag=e;const t=this.hldata[s].high,i=this.hldata[s].low;a.zdata[r].high=t,a.zdata[r].low=i,1==e&&(n=i<n?i:n,l=t>l?t:l)}return{zdata:a.zdata,min:n,max:l}}fillOHLCData(e,t,a){if(this.tclose<=e.begin||this.topen>=e.end)return a;this.rezoom(t);let i=e.begin,s=~~((e.begin-this.time)/t),r=0;s<0&&(i=this.time,r=-s,s=0);let n=a.min,l=a.max;for(;i<e.end&&i<this.tclose;s++,r++,i+=t){const e=this.ohlcdata[s].flag,t=this.ohlcdata[s].open,i=this.ohlcdata[s].high,o=this.ohlcdata[s].low,h=this.ohlcdata[s].close;a.zdata[r]={flag:e,open:t,high:i,low:o,close:h},1==e&&(n=o<n?o:n,l=i>l?i:l)}return{zdata:a.zdata,min:n,max:l}}integrate(e){let t=0;if(0==this.data.length)return t;let a=this.data[0];for(let i=1;i<this.data.length;i++){const s=this.data[i];s.time>e.begin&&s.time<=e.end&&(t+=a.value*(s.time-a.time),a=s)}return t}clearzdata(){this.zdata=[],this.hldata=[],this.ohlcdata=[],this.tstep=0}}}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{class e{constructor(e){this.url=e}getInfo(e=(e=>{}),t=(e=>{})){return fetch(this.url+"/?g:i&r="+Math.random()).then((e=>e.text())).then((t=>e(t))).catch((e=>{console.log("ArduinoController not available"),t(e)}))}setTemperature(e,t,a=(()=>{}),i=(()=>{})){return fetch(this.url+"/?s"+e+"t:"+Math.round(10*t)+"&r="+Math.random()).then((()=>{console.log("ArduinoController set temperature"),a()})).catch((()=>{console.log("ArduinoController set temperature failure"),i()}))}powerOn(e,t=(()=>{}),a=(()=>{})){return fetch(this.url+"/?s"+e+"m:1&r="+Math.random()).then((()=>{console.log("Power On",e),t()})).catch((()=>{console.log("Power On failure"),a()}))}powerOff(e,t=(()=>{}),a=(()=>{})){return fetch(this.url+"/?s"+e+"m:0&r="+Math.random()).then((()=>{console.log("Power Off",e),t()})).catch((()=>{console.log("Power Off failure"),a()}))}static parseInfo(e){const t=e.split(";"),[a,i,s,r,n,l,o,h,c,...u]=t;return{version:"ver."+a,numofz:+i,unixtime:+s,starttime:+r,lastsynctime:+n,lastsyncdelta:+l,lastsyncinterval:+o,tickcounter:+h,loopcounter:+c,zones:function e(t,a=[],i=0){if(!t.length)return a;const[s,...r]=t;switch(s){case"Z":{const[t,i,n,l,o,h,c,u,...m]=r;return a.push({type:s,id:+t,temperature:i/10,targetTemperature:n/10,humidity:l/10,onControl:+o,powerOn:+h,targetTemperatureDelta:c/10,sensorState:+u}),e(m,a,t)}case"H":{const[t,i,n,l,o,h,c,u,m,...d]=r;return a.push({type:s,id:+t,pressure:5*(10*i-1023)/8184,mode:+n,hilimit:+l,lolimit:+o,drylimit:+h,pumpinittime:+c,pumprunlimit:+u,retryinterval:+m}),e(d,a,t)}case"I":{const[t,i,n,l,o,h,...c]=r,[u,m,d]=[+n,+l,+o],p=[255&u,u>>8&255,u>>16&255,u>>24&255],f=[255&m,m>>8&255,m>>16&255,m>>24&255],g=[255&d,d>>8&255,d>>16&255,d>>24&255];return a.push({type:s,id:+t,poweron:+i,start:p,duration:f,days:g,mduration:+h}),e(c,a,t)}}return a}(u)}}static states=["OK","ErrChecksum","ErrTimeout","ErrConnect","ErrAckL","ErrAckH","ErrUnknown"];static sensorState=t=>e.states[-t]}var t=a(941),i=a.n(t);function s({firmware:e="",controllerDateTime:t=""}){const[a,i]=React.useState(Date.now());React.useEffect((()=>{const e=setInterval((()=>{i(Date.now())}),1e3);return()=>{clearInterval(e)}}),[]);const s=new Date(a),r=s.toLocaleTimeString(),n=s.toLocaleDateString();return React.createElement("div",{className:"header_c8adb03"},React.createElement("div",{className:"left_cdef396"},React.createElement("div",{className:"title_f84cf26"},"Arduino TermoController"),React.createElement("div",null,e),React.createElement("div",null,t)),React.createElement("div",{className:"datetime_fdfbec6"},React.createElement("div",{className:"time_b1c1c45"},r),React.createElement("div",{className:"date_d7127cf"},n)))}function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},r.apply(this,arguments)}function n({active:e=!1,disabled:t=!1,children:a="Button",...i}){return React.createElement("div",r({className:"button_c0afaa2 "+(e?"active_b40adfc":"")},i),a)}function l({title:e="Modal title",isOpen:t=!1,onSubmit:a=(()=>{}),onCancel:i=(()=>{}),children:s=null}){return t&&React.createElement("div",{className:"modalOverlay_faa7164",onClick:i},React.createElement("div",{className:"modalWindow_fac41c2",onClick:e=>e.stopPropagation()},React.createElement("div",{className:"modalHeader_ec3e5fe"},React.createElement("div",{className:"modalTitle_e276bb7"},e)),React.createElement("div",{className:"modalBody_a8134eb"},s),React.createElement("div",{className:"modalFooter_dcf803f"},React.createElement("span",{className:"cancel_b0d96c0",onClick:i},"Cancel"),React.createElement("span",{className:"apply_dc7f5d7",onClick:a},"Apply"))))}const o="name_fc64aab",h="value_be14f95",c="modal_button_aad8592",u=e=>Math.round(10*e)/10;function m({parameterName:e,displayedValue:t=0,controlledValue:a=0,controlledValue2:i=0,disabled:s=!1,update:r=(e=>{})}){const[n,m]=React.useState(!1),[d,p]=React.useState(a),[f,g]=React.useState(a),[v,w]=React.useState(!1);return s||React.useEffect((()=>{console.log("Effect update controlledValue",a),"number"==typeof a?(g(a),p(a)):p(f),w(!0)}),[a]),s?React.createElement("span",{className:"disabled_acbb102"},React.createElement("div",{className:o},e),React.createElement("div",{className:h},t)):React.createElement("span",{className:"enabled_fe9b8d8",onClick:()=>{m(!n)}},React.createElement("div",{className:o},e),React.createElement("div",null,React.createElement("span",{className:h},t),React.createElement("span",{className:v?h:"not_synced_value_afc6328"},"(",(v?f:d).toFixed(1),"±",i.toFixed(1),")")),React.createElement(l,{isOpen:n,title:"Set target temperature for Zone",onSubmit:()=>{d!=a&&(r(d),w(!1)),m(!1)},onCancel:()=>{p(a),m(!1)}},React.createElement("span",{className:c,onClick:()=>{p((e=>u(e-.1)))}},"-"),React.createElement("span",{className:"modal_parameter_be59a01",contentEditable:!0,suppressContentEditableWarning:!0,onBlur:e=>{console.log(+e.target.innerText),p(u(+e.target.innerText))}},d.toFixed(1)),React.createElement("span",{className:c,onClick:()=>{p((e=>u(e+.1)))}},"+")))}const d={controlbox:"controlbox_d0c639d",header:"header_b26ca6e"};function p({zone:t,onSetTemperature:a,onSetPowerControl:i}){return React.createElement("div",{className:d.controlbox},React.createElement("div",{className:d.header},React.createElement("div",{className:d.indicator}),"ZONE"+t.id+" Sensor: "+e.sensorState(t.sensorState)),React.createElement("div",null,React.createElement(n,{active:!!t.onControl,onClick:()=>i(t.id)},"PWRCTRL"),React.createElement(n,{active:!!t.powerOn,disabled:!0},"PWR"),React.createElement(n,{onClick:()=>{console.log("showpwr_button")}},"SHOWPWR"),React.createElement(n,null,"CONFIG")),React.createElement("div",null,React.createElement(m,{parameterName:"temperature",displayedValue:t.temperature.toFixed(1)+"°",controlledValue:t.targetTemperature,controlledValue2:t.targetTemperatureDelta,update:e=>a({...t,targetTemperature:e})}),React.createElement(m,{parameterName:"humidity",displayedValue:t.humidity.toFixed(1)+"%",disabled:!0})),React.createElement("div",{className:"sensorstatus"}))}function f(e,t,a=window,i={}){const s=React.useRef(t).current;React.useEffect((()=>{if(!a?.addEventListener)return;console.log("AddEventListener",e);const t=e=>s(e);return a.addEventListener(e,t,i),()=>{console.log("RemoveEventListener",e),a.removeEventListener(e,t,i)}}),[e,a])}const g={gridBox:"gridBox_fc13aaa",context:"context_f11840f",detail:"detail_ec20b03",contextTickLabels:"contextTickLabels_fe07fb7",detailTickLabels:"detailTickLabels_f68035d",svgBox:"svgBox_b08058f",yLabels:"yLabels_e4cb634",yTickLabels:"yTickLabels_c40706f"};function v({data:e,height:t,barw:a=2,min:i,max:s,color:r="#FFF"}){let n=t/(s-i),l="";e[0].flag&&(l+="M0 "+(t-n*(e[0].value-i)));for(let s=1;s<e.length;s++)if(e[s].flag){let r=t-n*(e[s].value-i);e[s-1].flag?l+="L"+s*a+" "+r:l+="M"+s*a+" "+r}return React.createElement("path",{d:l,fill:"none",stroke:r,strokeWidth:"1"})}const w=[{value:1,unit:"s",shift:10800},{value:2,unit:"s",shift:10800},{value:5,unit:"s",shift:10800},{value:10,unit:"s",shift:10800},{value:20,unit:"s",shift:10800},{value:30,unit:"s",shift:10800},{value:60,unit:"m",shift:10800},{value:120,unit:"m",shift:10800},{value:300,unit:"m",shift:10800},{value:600,unit:"m",shift:10800},{value:1200,unit:"m",shift:10800},{value:1800,unit:"m",shift:10800},{value:3600,unit:"h",shift:10800},{value:7200,unit:"h",shift:10800},{value:10800,unit:"h",shift:10800},{value:21600,unit:"h",shift:10800},{value:43200,unit:"h",shift:10800},{value:86400,unit:"d",shift:10800},{value:172800,unit:"d",shift:10800},{value:345600,unit:"d",shift:10800},{value:604800,unit:"w",shift:27e4},{value:1209600,unit:"w",shift:27e4},{value:2629800,unit:"M",shift:1},{value:5259600,unit:"M",shift:2},{value:7889400,unit:"M",shift:3},{value:15778800,unit:"M",shift:6}],E=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function y({title:e="TimeDiagram",width:t=300,height:a=200,min:i=0,max:s=1,children:r=null,timeInterval:n,onShift:l=(()=>{}),onZoom:o=(()=>{}),onSelectDate:h=(()=>{})}){const[c,u]=React.useState({x:0,y:0}),m=React.useRef(null);!function(e,t,a=(()=>{}),i=(()=>{}),s=(()=>{})){const r=React.useRef({isDragging:!1,clientX0:0,clientX1:0,pointerId1:null}).current,n=function(e,t=200){let a,i,s=!1;return function r(){if(s)return a=arguments,void(i=this);e.apply(this,arguments),s=!0,setTimeout((()=>{s=!1,a&&(r.apply(i,a),a=i=null)}),t)}}((e=>{if(e.preventDefault(),r.isDragging){if(e.isPrimary){let i=(e.offsetX-r.clientX0)/t;return r.clientX0=e.offsetX,a(i),void s(e.offsetX,e.offsetY)}if(r.pointerId1===e.pointerId){let a=e.offsetX-r.clientX0;if(Math.abs(a)<10)return;if(a=(r.clientX1-r.clientX0)/a,a<0)return;let s=r.clientX0/t;r.clientX1=e.offsetX,i(a,s)}}else s(e.offsetX,e.offsetY)}),30);f("wheel",(function(e){e.preventDefault();let a=e.wheelDelta>0?.9:1.1111111111111112,s=e.offsetX/t;i(a,s)}),e),f("pointerdown",(function(e){if(e.preventDefault(),e.isPrimary)return r.isDragging=!0,void(r.clientX0=e.offsetX);null===r.pointerId1&&(r.pointerId1=e.pointerId,r.clientX1=e.offsetX)}),e),f("pointermove",n,e),f("pointerup",(function(e){e.preventDefault(),e.isPrimary?r.isDragging=!1:r.pointerId1===e.pointerId&&(r.pointerId1=null,r.clientX1=0)}),e),f("pointerout",(function(e){s(0,0)}),e)}(m.current,t,l,o,((e,t)=>{u({x:e,y:t})}));let d=(s-i)/a;return React.createElement(React.Fragment,null,React.createElement("div",{className:g.header,style:{width:t}},React.createElement("div",null,e)),React.createElement("div",{className:g.gridBox},React.createElement("div",{className:g.context}," ",function(e,t,a,i=50){let s=i*(t-e)/a,[r]=[0,...w.filter((e=>s>=e.value)).keys()].slice(-1),n=a/(t-e);const l=[];let o=new Date(1e3*(e+10800)),h=e;if("M"==w[r].unit){do{let e=o.getUTCFullYear();o.setUTCHours(0),o.setMinutes(0),o.setSeconds(0),o.setUTCFullYear(e+1,0,1);let a=o.getTime()/1e3-10800,i=a<t?(a-h)*n:(t-h)*n;l.push({tick:h,label:e,width:i}),h=a}while(h<t);return l}if("d"==w[r].unit||"w"==w[r].unit){do{let e=o.getUTCMonth()+1,a=o.getUTCFullYear();o.setUTCHours(0),o.setMinutes(0),o.setSeconds(0),o.setUTCDate(1),o.setUTCMonth(e);let i=o.getTime()/1e3-10800,s=i<t?(i-h)*n:(t-h)*n;l.push({tick:h,label:a+"."+(e<10?"0":"")+e,width:s}),h=i}while(h<t);return l}if("h"==w[r].unit){let a=86400*~~((e+w[r].shift)/86400+1)-w[r].shift;do{let e=a<t?(a-h)*n:(t-h)*n,i=new Date(1e3*(h+10800)),s=i.getUTCDate(),r=i.getUTCMonth()+1,o=i.getUTCFullYear();l.push({tick:h,label:o+"."+(r<10?"0":"")+r+"."+(s<10?"0":"")+s,width:e}),h=a,a+=86400}while(h<t);return l}if("m"==w[r].unit){let a=3600*~~((e+w[r].shift)/3600+1)-w[r].shift;do{let e=a<t?(a-h)*n:(t-h)*n,i=new Date(1e3*(h+10800)),s=i.getUTCHours(),r=i.getUTCDate(),o=i.getUTCMonth()+1;l.push({tick:h,label:(o<10?"0":"")+o+"."+(r<10?"0":"")+r+" "+(s<10?"0":"")+s+"h",width:e}),h=a,a+=3600}while(h<t);return l}if("s"==w[r].unit){let a=60*~~((e+w[r].shift)/60+1)-w[r].shift;do{let e=a<t?(a-h)*n:(t-h)*n,i=new Date(1e3*(h+10800)),s=i.getUTCMinutes(),r=i.getUTCHours();l.push({tick:h,label:(r<10?"0":"")+r+":"+(s<10?"0":"")+s,width:e}),h=a,a+=60}while(h<t);return l}return l}(n.begin,n.end,t,50).map((e=>React.createElement("div",{className:g.contextTickLabels,key:e.tick,style:{width:e.width}},e.label)))),React.createElement("div",{className:g.detail,style:{height:a+12}}," ",function(e,t,a,i=50){let s=i*(t-e)/a,[r]=[0,...w.filter((e=>s>=e.value)).keys()].slice(-1),n=a/(t-e),l=e,o=new Date(1e3*(e+10800));const h=[];if("M"==w[r].unit){do{let e=o.getUTCMonth();o.getUTCFullYear(),o.setUTCHours(0),o.setMinutes(0),o.setSeconds(0),o.setUTCDate(1),o.setUTCMonth(e+(w[r].shift-e%w[r].shift));let a=o.getTime()/1e3-10800,i=a<t?(a-l)*n:(t-l)*n;h.push({tick:l,label:E[e],width:i}),l=a}while(l<t);return h}let c=w[r].value,u=~~((e+w[r].shift)/c+1)*c-w[r].shift;if("s"==w[r].unit){do{let e=u<t?(u-l)*n:(t-l)*n;o=new Date(1e3*(l+10800));let a=o.getUTCSeconds();h.push({tick:l,label:(a<10?"0":"")+a+"''",width:e}),l=u,u+=c}while(l<t);return h}if("m"==w[r].unit){do{let e=u<t?(u-l)*n:(t-l)*n;o=new Date(1e3*(l+10800));let a=o.getUTCMinutes();h.push({tick:l,label:(a<10?"0":"")+a+"'",width:e}),l=u,u+=c}while(l<t);return h}if("h"==w[r].unit){do{let e=u<t?(u-l)*n:(t-l)*n;o=new Date(1e3*(l+10800));let a=o.getUTCHours();h.push({tick:l,label:(a<10?"0":"")+a+"h",width:e}),l=u,u+=c}while(l<t);return h}if("d"==w[r].unit){do{let e=u<t?(u-l)*n:(t-l)*n;o=new Date(1e3*(l+10800));let a=o.getUTCDate();h.push({tick:l,label:(a<10?"0":"")+a,width:e}),l=u,u+=c}while(l<t);return h}if("w"==w[r].unit){do{let e=u<t?(u-l)*n:(t-l)*n;o=new Date(1e3*(l+10800));let a=o.getUTCDate();h.push({tick:l,label:(a<10?"0":"")+a,width:e}),l=u,u+=c}while(l<t);return h}return h}(n.begin,n.end,t,50).map((e=>React.createElement("div",{className:g.detailTickLabels,key:e.tick,style:{width:e.width,height:a+12},onClick:()=>{h(e.tick)}},e.label)))),React.createElement("div",{className:g.yLabels,style:{width:t,height:a}}," ",function(e,t,a,i=20){let s=i*(t-e)/a,r=Math.round(Math.log(s)/Math.log(10)),n=Math.pow(10,r),l=s/n;l<=1?l=1:l<=2?l=2:l<=5?l=5:(l=10,r++),r=r<0?-r:0;let o=n*l,h=a/(t-e),c=[],u=t,m=o*~~(t/o);do{let t=m>e?h*(u-m):h*(u-e);t>0&&c.push({tick:u,label:u.toFixed(r),height:t}),u=m,m-=o}while(u>e);return c}(i,s,a).map(((e,t)=>React.createElement("div",{className:g.yTickLabels,key:t,style:{height:e.height}},e.label)))),React.createElement("svg",{ref:m,width:t,height:a,viewBox:`0 0 ${t} ${a}`,className:g.svgBox},r)),React.createElement("div",{style:{width:t}},new Date(1e3*(n.begin+c.x*(n.end-n.begin)/t)).toLocaleString()+" "+(s-d*c.y).toFixed(2)))}const b="row_f8cec4a",D={width:35},R={width:60},T={width:30};function S({title:e="Table",headerName:t="value",data:a=[],time:i,height:s=200}){const[r,n]=React.useState(a.findIndex((e=>e.time>=i))),l=React.useRef(null),o=React.useRef(i);if(o.current!=i){o.current=i;let e=a.findIndex((e=>e.time>=i));console.log(e,r),n(e),console.log(o.current)}let h=~~(s/12),c=a.length,u=s*(h/c);u=u<5?5:u;let m=r/c*(s-u);const d=React.useRef({isDragging:!1,y:0,row:r});return f("wheel",(function(e){e.preventDefault();let t=e.wheelDelta>0?-5:5;n((e=>e+t))}),l.current),f("mousemove",(function(e){if(d.current.isDragging){let t=c*(e.clientY-d.current.y)/s,a=d.current.row+t;a<0&&(a=0),a>c-h&&(a=c-h),n(~~a)}}),l.current),f("mouseup",(function(e){d.current={isDragging:!1,y:0}}),l.current),React.createElement(React.Fragment,null,React.createElement("div",null,e),React.createElement("div",{ref:l,className:"wrapper_b8d6404",style:{height:s}},React.createElement("div",{className:"table_a2395b7"},React.createElement("div",{className:b},React.createElement("span",{style:D},"#"),React.createElement("span",{style:R},"time"),React.createElement("span",{style:T},t))," ",a.slice(r,r+h).map(((e,t)=>{let a=(e.time+10800)%86400,i=~~(a/3600),s=~~(a%3600/60),n=a%60;return React.createElement("div",{className:b,key:t},React.createElement("span",{style:D},r+t+1),React.createElement("span",{style:R},(i<10?"0":"")+i+":"+(s<10?"0":"")+s+":"+(n<10?"0":"")+n),React.createElement("span",{style:T},e.value))}))),React.createElement("div",{className:"scrollbarTrack_e15be30",onClick:function(e){n((e=>e+h>c?c:e+h))}},React.createElement("div",{className:"scrollbarUp_a9a56e8",style:{height:m},onClick:function(e){e.stopPropagation(),n((e=>e-h<0?0:e-h))}}),React.createElement("div",{className:"scrollbarThumb_dbe7646",style:{height:u},onMouseDown:function(e){e.preventDefault(),d.current={isDragging:!0,y:e.clientY,row:r},console.log("mouseDown",e)},onClick:e=>{e.stopPropagation()}}))))}const L=350,_=250;function C(e){const[t,a]=React.useState(e.timeInterval),[i,s]=React.useState({thermalData:[],hydroData:[]}),[r,n]=React.useState(0),o=React.useRef(e.logController).current;React.useEffect((()=>{a((t=>({begin:e.timeInterval.end-t.end+t.begin,end:e.timeInterval.end})))}),[e.timeInterval.end]),React.useEffect((()=>{o.setOnLoad((()=>a((e=>({...e}))))),o.addThermalSensor(2,["white","white","red"],new Date("2016.04.29")/1e3,new Date("2022.11.06")/1e3),o.addThermalSensor(3,["white","white","red"],new Date("2018.09.14")/1e3,new Date("2022.11.06")/1e3),o.addHydroSensor(0,["white","white","red"],new Date("2021.07.25")/1e3,new Date("2022.11.06")/1e3)}),[]),React.useEffect((()=>{let e=1*(t.end-t.begin)/L;const a=o.getThermalSensorsRegData(t,e),i=o.getHydroSensorsRegData(t,e);s({thermalData:a,hydroData:i})}),[t]);const h=React.useCallback((e=>{a((t=>{let a=t.end-t.begin;return{begin:t.begin-a*e,end:t.end-a*e}}))})),c=React.useCallback(((e,t)=>{a((a=>{let i=a.end-a.begin;if(e*i<300)return a;let s=a.begin+t*i;return{begin:s-e*(s-a.begin),end:s+e*(a.end-s)}}))})),u=React.useCallback((e=>{n(e)}));let m=Math.min(...i.thermalData.map((e=>e[0].min))),d=Math.max(...i.thermalData.map((e=>e[0].max))),p=Math.min(...i.thermalData.map((e=>e[1].min))),f=Math.max(...i.thermalData.map((e=>e[1].max))),g=Math.min(...i.hydroData.map((e=>e.min))),w=Math.max(...i.hydroData.map((e=>e.max))),E=86400*~~((r+10800)/86400)-10800;return React.createElement("div",{className:"wrapper_d20fbe7"},React.createElement("div",{className:"diagramsColumn_ebe3634"},React.createElement(y,{title:"Temperature, °C",timeInterval:t,onShift:h,onZoom:c,onSelectDate:u,min:m,max:d,width:L,height:_},i.thermalData[0]&&React.createElement(v,{data:i.thermalData[0][0].zdata,height:_,min:m,max:d,barw:1,color:"#ffa23c"}),i.thermalData[1]&&React.createElement(v,{data:i.thermalData[1][0].zdata,height:_,min:m,max:d,barw:1,color:"#88a23c"})),React.createElement(y,{title:"Humidity, %",timeInterval:t,onShift:h,onZoom:c,onSelectDate:u,min:p,max:f,width:L,height:_},i.thermalData[0]&&React.createElement(v,{data:i.thermalData[0][1].zdata,height:_,min:p,max:f,barw:1,color:"#bbb"}),i.thermalData[1]&&React.createElement(v,{data:i.thermalData[1][1].zdata,height:_,min:p,max:f,barw:1,color:"#88bbbb"})),React.createElement(y,{title:"Pressure Hydro System, bar",timeInterval:t,onShift:h,onZoom:c,onSelectDate:u,min:g,max:w,width:L,height:_},i.hydroData[0]&&React.createElement(v,{data:i.hydroData[0].zdata,height:_,min:g,max:w,barw:1,color:"#ffa23c"}))),0!=r&&React.createElement(l,{isOpen:0!=r,title:"Set target temperature for Zone",onCancel:()=>{n(0)}},React.createElement(S,{title:new Date(1e3*r).toLocaleDateString()+" Z2 H",data:o.hydroSensors[0].timeslots[E]?o.hydroSensors[0].timeslots[E].data:[],time:r})))}const x=[{type:"Z",id:1,temperature:14.1,targetTemperature:23.5,targetTemperatureDelta:.2,humidity:54.3,onControl:0,powerOn:0,sensorState:-3},{type:"Z",id:2,temperature:15.2,targetTemperature:21.2,targetTemperatureDelta:.1,humidity:48.1,onControl:0,powerOn:0,sensorState:-3},{type:"Z",id:3,temperature:5.9,targetTemperature:0,targetTemperatureDelta:0,humidity:85.1,onControl:0,powerOn:0,sensorState:-3},{type:"H",id:0,pressure:2.4}],N=window.location.hostname;console.log(N);const k="192.168.2.2"==N||"localhost"==N?"http://192.168.1.1:4480/data/log/":"./log/",z="192.168.2.2"==N?1:8,M=new e("http://192.168.2.2"),P=new(i())(k,(()=>{}),z),O="192.168.2.2"==N||"localhost"==N||"192.168.1.1"==N||"10.8.0.1"==N?Date.now()/1e3:new Date("2022.06.26 00:00:00")/1e3,I="192.168.2.2"==N||"localhost"==N||"192.168.1.1"==N||"10.8.0.1"==N;function U(){const[t,a]=React.useState({version:"offline",unixtime:0,zones:x}),[i,r]=React.useState({begin:O-172800,end:O});React.useEffect((()=>{if(I){const t=setInterval((()=>{r((e=>({...e,end:Date.now()/1e3})))}),12e5),i=setInterval((()=>{M.getInfo((t=>a(e.parseInfo(t))),(()=>a((e=>({...e,version:"offline"})))))}),1e4);return()=>{clearInterval(i),t&&clearInterval(t)}}}),[]);const n=React.useCallback((e=>{M.setTemperature(e.id,e.targetTemperature,(()=>a((t=>({...t,zones:t.zones.map((t=>t.id==e.id?e:t))})))),(()=>a((t=>({...t,zones:t.zones.map((t=>t.id==e.id?{...t,targetTemperature:{}}:t))})))))})),l=React.useCallback((e=>{const i=e-1;t.zones[i].onControl?M.powerOff(e,(()=>a((t=>({...t,zones:t.zones.map((t=>t.id==e?{...t,onControl:0}:t))}))))):M.powerOn(e,(()=>a((t=>({...t,zones:t.zones.map((t=>t.id==e?{...t,onControl:1}:t))})))))}));return React.createElement("div",{className:"wrapper_d808929"},React.createElement(s,{firmware:t.version,controllerDateTime:new Date(1e3*t.unixtime).toLocaleTimeString()}),React.createElement("div",{className:"main_ef0bc9e"},React.createElement("div",{className:"controlsbox_d8af8a5"},t.zones.filter((e=>"Z"===e.type)).map(((e,t)=>React.createElement(p,{key:t,zone:e,onSetTemperature:n,onSetPowerControl:l})))),React.createElement("div",{className:"diagramsbox_e0be825"},React.createElement(C,{timeInterval:i,logController:P})),React.createElement("div",{className:"info_bae79b0"},JSON.stringify(t))))}ReactDOM.render(React.createElement(U,null),document.getElementById("root"))})()})();